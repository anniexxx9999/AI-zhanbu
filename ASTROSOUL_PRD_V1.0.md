# 产品需求文档 (PRD): AstroSoul V1.0
## 完整修订版 - 印度占星AI解读平台

---

**文档版本**: 1.1 (完整版)  
**发布日期**: 2025年10月12日  
**产品负责人**: Xuan  
**项目代号**: AstroSoul  

---

## 目录

1. [产品概述与愿景](#1-产品概述与愿景)
2. [目标用户](#2-目标用户)
3. [核心功能模块](#3-核心功能模块)
4. [设计与用户体验](#4-设计与用户体验)
5. [技术规格](#5-技术规格)
6. [产品路线图](#6-产品路线图)
7. [商业模式](#7-商业模式)
8. [成功指标](#8-成功指标)
9. [风险与应对](#9-风险与应对)

---

## 1. 产品概述与愿景

### 1.1 产品简介

**AstroSoul** 是一款基于现代AI技术的印度占星（Vedic Astrology）Web应用。它旨在将古老、深奥的占星智慧，通过简洁美观的界面和温暖、富有启发性的AI解读，变得易于理解和触手可及。

### 1.2 产品愿景

> **"映射你的灵魂，发现你的命运"**

成为年轻一代进行自我探索、理解人际关系、并获得人生启发的首选数字化占星工具。我们不提供宿命论的断言，而是提供一个认识自我潜能、拥抱人生课题的"灵魂地图"。

### 1.3 解决的核心问题

| 痛点 | AstroSoul的解决方案 |
|------|---------------------|
| **传统占星门槛高** | 术语复杂，图表难懂，让普通用户望而却步 → 提供交互式可视化命盘，鼠标悬停即可理解 |
| **信息质量良莠不齐** | 网上免费信息不准确，缺乏系统性和深度 → 基于瑞士星历表精准计算 + GPT-4深度解读 |
| **解读缺乏温度** | 很多占星软件只提供冰冷的数据，或生硬的罐头式解读 → AI生成个性化、温暖、赋能的解读文本 |
| **功能单一** | 市面产品要么只有命盘，要么只有泛泛解读 → 提供精准命盘 + 多维度付费报告的完整体验 |

---

## 2. 目标用户

### 2.1 主要用户画像

#### 画像 A: "好奇探索者" (优先级: ⭐⭐⭐⭐⭐)

- **年龄**: 20-35岁
- **性别**: 不限，但女性占比预计更高
- **特征**: 
  - 对自我认知工具有浓厚兴趣（MBTI、九型人格、占星等）
  - 科技产品重度使用者，习惯数字化付费
  - 追求"有趣、易懂、了解自己和另一半"
  - 社交媒体活跃，喜欢分享个性化内容
- **核心需求**: 快速获得有趣且准确的自我洞察，特别是关于情感关系的信息
- **付费意愿**: 中等（需要强有力的"钩子"内容吸引）

#### 画像 B: "进阶爱好者" (优先级: ⭐⭐⭐⭐)

- **年龄**: 25-45岁
- **性别**: 不限
- **特征**: 
  - 有一定占星基础，了解基本术语
  - 追求数据准确性和专业图表
  - 希望看到多个分盘（D1-D12）进行深度研究
  - 渴望获得深刻、非表面的见解
- **核心需求**: 专业级工具 + 超越常规的深度解读
- **付费意愿**: 高（愿意为高质量内容付费）

### 2.2 用户旅程地图 (User Journey)

```
发现阶段 → 注册体验 → 免费价值感知 → 付费转化 → 深度使用 → 社交分享
   ↓           ↓            ↓             ↓          ↓           ↓
社交媒体   输入出生信息   查看命盘图     购买报告    获得洞察     生成分享卡片
搜索引擎   获取经纬度     D1/D9/D10     支付$9.99   深度阅读     推荐给朋友
朋友推荐   生成命盘       免费AI解读     等待生成    收藏保存     订阅更新
```

---

## 3. 核心功能模块

### 模块 F1: 用户引导与命盘生成
> **战略定位**: 产品的"第一印象"，必须做到极致顺滑和专业可信。

#### F1.1 出生信息输入

**用户故事**:  
> *作为一个新用户，我想要在一个简洁、清晰的页面上轻松输入我的出生信息，以便快速生成我的专属命盘。*

**功能需求细则**:

| 需求项 | 详细说明 | 优先级 |
|--------|----------|--------|
| **输入字段** | • 姓名（昵称，用于个性化称呼）<br>• 出生日期（日期选择器）<br>• 出生时间（精确到分钟，时间选择器）<br>• 出生城市（文本输入 + 自动补全） | P0 |
| **城市自动补全** | 【关键】集成 **Google Places API**，实现：<br>• 用户输入时自动显示城市建议列表<br>• 选择城市后自动获取经纬度和时区<br>• 支持全球主要城市（英文/中文） | P0 |
| **数据验证** | • 出生日期不能晚于当前日期<br>• 出生时间必须精确到分钟<br>• 城市必须从建议列表中选择（确保有经纬度数据） | P0 |
| **用户体验优化** | • 使用现代化的日期/时间选择器组件<br>• 每个字段有清晰的图标和说明<br>• 输入框聚焦时边框发出"天体金"微光<br>• 表单填写进度指示器 | P1 |
| **隐私保护** | • 明确告知："你的数据仅用于命盘计算，绝不出售给第三方"<br>• 提供隐私政策链接<br>• 可选：允许用户选择"不保存我的信息" | P0 |

**技术实现要点**:
```typescript
// 前端表单数据结构
interface BirthData {
  name: string;
  birthDate: Date;
  birthTime: string; // HH:mm format
  birthPlace: {
    city: string;
    latitude: number;
    longitude: number;
    timezone: string;
  };
}
```

---

#### F1.2 命盘计算与呈现

**用户故事**:  
> *作为一个用户，我想要在提交信息后，立即看到一个专业且美观的印度占星命盘图，让我感到"这很专业"。*

**功能需求细则**:

| 需求项 | 详细说明 | 优先级 |
|--------|----------|--------|
| **后端计算逻辑** | • 前端将BirthData发送至 `/api/generate-chart`<br>• 后端调用成熟的第三方占星API（如 AstroAPI, VedicRishi等）<br>• 【关键】必须获取完整的JSON数据，包含：<br>  - D1 (Rasi Chart)<br>  - D9 (Navamsa)<br>  - D10 (Dasamsa)<br>  - 行星位置（度数、星座、宫位、Nakshatra）<br>  - 宫主星信息 | P0 |
| **前端SVG绘制** | 【视觉核心】绘制 **北印度风格菱形命盘**：<br>• 12宫位菱形布局（从顶部顺时针排列）<br>• 清晰标注宫位序号（1-12）<br>• 显示每宫所在星座（符号或名称）<br>• 显示落入该宫的行星（符号 + 度数）<br>• 使用SVG确保缩放不失真，响应式设计 | P0 |
| **图例与说明** | • 提供行星符号对照表（☉太阳、☽月亮、♂火星等）<br>• 提供星座符号对照表（♈白羊、♉金牛等）<br>• 可折叠的"如何阅读这个图表"帮助文档 | P1 |
| **交互增强** | • 鼠标悬停宫位：高亮边框，弹出信息卡片（如"第7宫 - 伴侣、婚姻"）<br>• 鼠标悬停行星：高亮行星，显示详细信息（度数、Nakshatra、守护宫位）<br>• 点击行星：用发光线条连接到它守护的宫位 | P1 |
| **加载状态** | • 计算时显示优雅的加载动画（星辰轨迹动画）<br>• 显示提示文字："正在为你计算宇宙坐标..." | P1 |

**设计规范**:
- 命盘图最小宽度：600px
- 行星符号大小：18px，悬停时放大到22px
- 宫位线条颜色：月岩灰 (#A0AEC0)，悬停时变为天体金 (#E3B37C)

---

### 模块 F2: 个人命盘仪表盘
> **战略定位**: 产品的"免费核心价值"，必须给用户提供足够的惊喜，同时为付费内容铺垫。

#### F2.1 基础信息解读

**用户故事**:  
> *作为一个好奇探索者，我希望能得到一些关于我性格核心的、简单易懂的解读，让我对占星产生兴趣。*

**功能需求细则**:

| 需求项 | 详细说明 | 优先级 |
|--------|----------|--------|
| **展示内容** | 在命盘图左侧展示三个精美的信息卡片：<br><br>**1. 上升星座 (Lagna)**<br>• 标题："你的人生面具"<br>• 显示星座名称 + 符号<br>• 一句话描述（如"白羊上升的你，天生就是开拓者"）<br><br>**2. 太阳星座**<br>• 标题："你的灵魂核心"<br>• 显示星座名称 + 符号<br>• 一句话描述<br><br>**3. 月亮星座**<br>• 标题："你的内在情绪"<br>• 显示星座名称 + 符号<br>• 一句话描述 | P0 |
| **免费AI解读** | 【AI初体验 - 付费钩子】<br>• 在三个卡片下方，展示一段由GPT-4生成的个性化解读<br>• 长度：约150字<br>• 风格：温暖、赋能、引人入胜<br>• Prompt要点：结合上升、太阳、月亮星座，用诗意语言描述用户的核心气质<br>• 结尾引导："想要了解更多关于你的灵魂伴侣？解锁完整报告→" | P0 |
| **视觉设计** | • 卡片使用玻璃拟态效果（Glassmorphism）<br>• 背景：半透明的深色，带微妙模糊<br>• 边框：天体金 1px<br>• 星座符号使用大号显示，带微光效果 | P1 |

**API调用**:
```typescript
// 调用OpenAI API生成免费解读
POST /api/interpret-basic
{
  "lagna": "Aries",
  "sun": "Taurus",
  "moon": "Cancer"
}

// 返回
{
  "interpretation": "你的白羊上升赋予了你无畏的勇气..."
}
```

---

#### F2.2 切换查看分盘 (战略性分盘规划)

**用户故事**:  
> *作为一个对占星有深度兴趣的用户，我希望能自由查看多个重要的分盘图，以便我自己进行研究和对照。*

**功能需求细则**:

| 需求项 | 详细说明 | 优先级 |
|--------|----------|--------|
| **下拉菜单设计** | 在命盘图区域顶部提供精美的下拉菜单（Dropdown Select）：<br>• 默认选中：D1 - Rasi Chart (命盘)<br>• 菜单样式：深色背景，天体金边框，悬停时带微光 | P0 |
| **V1.0开放分盘** | 【免费查看】以下分盘完全可用：<br><br>• **D1 - Rasi Chart** (命盘)<br>  - 说明："你的人生蓝图总览"<br><br>• **D9 - Navamsa** (婚姻/命运盘)<br>  - 说明："你的灵魂伴侣与命运转折"<br><br>• **D10 - Dasamsa** (事业盘)<br>  - 说明："你的事业天命与社会角色" | P0 |
| **V1.0锁定分盘** | 【营销预热】在下拉菜单中以"置灰"状态显示：<br><br>• **D2 - Hora** 💰 (财富盘 - 即将推出)<br>• **D4 - Chaturthamsa** 🏠 (家宅盘 - 即将推出)<br>• **D7 - Saptamsa** 👶 (子女盘 - 即将推出)<br>• **D12 - Dwadasamsa** 👪 (父母盘 - 即将推出)<br><br>点击时弹出模态窗：<br>• 标题："即将推出《财富潜力报告》"<br>• 内容："深度解析你的D2财富盘，揭示你的财富累积方式与投资天赋"<br>• 行动：输入邮箱订阅上线通知<br>• 按钮："抢先预约（赠送限时8折优惠码）" | P1 |
| **切换交互** | • 选择不同分盘后，命盘图和数据必须同步更新<br>• 图表上方显示当前分盘名称（大号Lora字体）<br>• 切换时有平滑的淡入淡出动画（300ms）<br>• 更新URL参数（如 `/dashboard?chart=D9`），支持分享链接 | P0 |

**技术实现要点**:
```typescript
// 分盘配置对象
const divisionalCharts = {
  D1: { name: "Rasi Chart", description: "人生蓝图总览", locked: false },
  D9: { name: "Navamsa", description: "灵魂伴侣与命运转折", locked: false },
  D10: { name: "Dasamsa", description: "事业天命与社会角色", locked: false },
  D2: { name: "Hora", description: "财富潜力", locked: true, futureReport: "《财富潜力报告》" },
  D7: { name: "Saptamsa", description: "子女缘分", locked: true, futureReport: "《亲子缘分报告》" },
  // ... 更多分盘
};
```

---

### 模块 F3: AI深度解读报告 - 配偶画像
> **战略定位**: V1.0的核心变现产品，必须提供超出预期的价值，让用户感到"物超所值"。

#### F3.1 解锁与支付流程

**用户故事**:  
> *当我对免费内容感到满意后，我希望能方便地付费解锁关于我未来伴侣的深度报告。*

**功能需求细则**:

| 需求项 | 详细说明 | 优先级 |
|--------|----------|--------|
| **CTA按钮位置** | 在仪表盘右侧显著位置设置：<br>• 标题："你的第七宫隐藏着什么秘密？"<br>• 副标题："AI为你绘制你的灵魂伴侣画像"<br>• 按钮文字："解锁完整报告 - $9.99"<br>• 视觉：银河紫晶色大按钮，带脉冲光效动画 | P0 |
| **Stripe支付集成** | 点击按钮后弹出支付模态窗：<br>• 使用Stripe Checkout（推荐）或Stripe Elements<br>• 支持信用卡、Apple Pay、Google Pay<br>• 显示安全徽章和隐私保证<br>• 支付成功后自动跳转到报告生成页面 | P0 |
| **定价策略** | V1.0采用 **单次报告付费** 模式：<br>• 价格：$9.99 / 份报告<br>• 支付后永久解锁该报告<br>• 未来可推出：3份报告套餐 $24.99（省$5.00） | P0 |
| **错误处理** | • 支付失败时显示友好提示<br>• 提供重试按钮<br>• 支持邮件联系客服 | P1 |

---

#### F3.2 AI解读生成与展示

**用户故事**:  
> *在支付后，我希望能看到一份详尽、深刻、且语言温暖的"配偶画像"报告，让我感到惊喜和被理解。*

**功能需求细则**:

| 需求项 | 详细说明 | 优先级 |
|--------|----------|--------|
| **后端AI逻辑** | 支付成功后，客户端请求 `/api/interpret-spouse`：<br><br>【AI核心Prompt设计】<br>• 模型：GPT-4 (temperature: 0.7)<br>• 角色设定："你是一位智慧、慈悲的印度占星大师，擅长用诗意而准确的语言解读命盘"<br>• 输入数据：<br>  - D1盘的第7宫信息（宫主星、宫内行星、相位）<br>  - D1的金星位置（男性看配偶）/ 木星位置（女性看配偶）<br>  - **完整的D9 Navamsa盘数据**（婚姻盘核心）<br>  - D9的第1宫（配偶性格）和第7宫（婚姻质量）<br>• 输出要求：<br>  - 总字数：1500-2000字<br>  - 结构化输出（见下方报告结构）<br>  - 语言风格：温暖、赋能、避免负面断言 | P0 |
| **报告内容结构** | **第一部分：引言（约200字）**<br>• 欢迎用户，点出其第7宫的核心特质<br>• 建立情感连接<br><br>**第二部分：TA的性格与灵魂（约400字）**<br>• 基于D9的上升星座和主要行星<br>• 描述配偶的核心性格特质<br>• 描述TA的价值观和人生追求<br><br>**第三部分：TA的外貌与气质（约300字）**<br>• 基于D9上升星座和金星位置<br>• 描述可能的外貌特征（身高、体型、气质）<br>• 描述TA的穿着风格和给人的第一印象<br><br>**第四部分：你们的相遇方式（约300字）**<br>• 基于D1第7宫主星所在宫位<br>• 推测可能的相遇场景（工作、朋友介绍、旅行等）<br>• 描述相遇时的感觉<br><br>**第五部分：关系的相处模式（约400字）**<br>• 基于D9盘整体和D1第7宫<br>• 分析关系中的优势和挑战<br>• 提供相处建议<br><br>**第六部分：结语 - 赋能建议（约200字）**<br>• 总结核心洞察<br>• 给出积极、赋能的人生建议<br>• 鼓励用户拥抱未来 | P0 |
| **前端展示设计** | • 报告页面设计精美，排版优雅<br>• 使用大号Lora字体作为标题<br>• 正文使用Inter字体，行高1.8，字号16px<br>• 每个部分之间有清晰的视觉分隔<br>• 背景使用微妙的星空图案 | P0 |
| **流式输出体验** | 【体验核心】使用 **SSE (Server-Sent Events)** 实现流式输出：<br>• 报告文字逐字或逐句出现（打字机效果）<br>• 生成前显示优雅的加载动画："正在解读你的第七宫..."<br>• 流式输出时，用户可以实时看到内容生成<br>• 完成后显示"报告生成完成"提示 | P1 |
| **保存与下载** | • 报告自动保存到用户账户<br>• 提供"下载为PDF"功能（带品牌设计）<br>• 支持"复制全文"功能 | P1 |

**技术实现示例**:
```python
# 后端Prompt模板片段
SPOUSE_PROMPT_TEMPLATE = """
你是一位智慧、慈悲的印度占星大师。请基于以下命盘数据，为用户生成一份关于其未来配偶的深度画像报告。

【用户命盘数据】
- D1第7宫宫主星：{d1_7th_lord} 位于 {d1_7th_lord_house}宫 {d1_7th_lord_sign}座
- D1金星位置：{d1_venus_position}
- D9上升星座：{d9_ascendant}
- D9第1宫行星：{d9_1st_house_planets}
- D9第7宫宫主星：{d9_7th_lord}

【输出要求】
1. 总字数1500-2000字
2. 分为六个部分（引言、性格、外貌、相遇、相处、结语）
3. 语言温暖、诗意、赋能，避免负面断言
4. 将挑战解读为"成长的课题"

现在开始生成报告：
"""
```

---

#### F3.3 报告分享

**用户故事**:  
> *得到一份有趣的报告后，我希望能轻松地分享一个精美的摘要卡片到社交媒体，让朋友也来尝试。*

**功能需求细则**:

| 需求项 | 详细说明 | 优先级 |
|--------|----------|--------|
| **分享按钮** | 在报告页面顶部提供醒目的"分享"按钮 | P1 |
| **自动生成图片** | 点击后，后端自动生成一张精美的分享卡片（PNG/JPEG）：<br>• 尺寸：1200x630px（适配社交媒体）<br>• 背景：用户的D1命盘图的艺术化版本（模糊+渐变叠加）<br>• 前景：<br>  - AstroSoul Logo（左上角）<br>  - 用户昵称："@{name} 的灵魂伴侣画像"<br>  - 报告金句摘要（居中大字，从报告中提取最有吸引力的一句）<br>  - 二维码（右下角，指向网站首页）<br>  - Tagline："映射你的灵魂，发现你的命运"<br>• 技术：使用Canvas API或Puppeteer生成 | P1 |
| **分享渠道** | • 一键复制图片到剪贴板<br>• 生成分享链接<br>• 集成社交媒体分享（Twitter、Facebook、Instagram等） | P2 |

---

## 4. 设计与用户体验

### 4.1 品牌视觉识别 (Visual Identity)

#### 4.1.1 色彩系统

| 颜色名称 | Hex Code | 用途 | 示例 |
|----------|----------|------|------|
| **午夜靛蓝** (Midnight Indigo) | `#191D3A` | 主背景色 | 页面主背景、卡片背景 |
| **天体金** (Celestial Gold) | `#E3B37C` | 主强调色 | Logo、标题、图标、高亮边框 |
| **银河紫晶** (Galactic Amethyst) | `#9F7AEA` | CTA按钮色 | 所有主要行动按钮 |
| **星云白** (Nebula White) | `#F7FAFC` | 主文本色 | 正文文字 |
| **月岩灰** (Moon Rock Gray) | `#A0AEC0` | 辅助文本色 | 次要信息、分割线 |

**色彩使用原则**:
- **70% 午夜靛蓝** (主背景)
- **20% 星云白/月岩灰** (文本)
- **10% 天体金 + 银河紫晶** (强调元素)

#### 4.1.2 字体系统

| 字体类型 | 字体名称 | 用途 | 字重 |
|----------|----------|------|------|
| **Display/标题** | Lora | 页面大标题、报告章节标题 | Bold (700) |
| **Body/正文** | Inter | 段落文字、按钮文字、表单文字 | Regular (400), Medium (500), SemiBold (600) |
| **Monospace/等宽** | JetBrains Mono | 行星度数、技术信息 | Regular (400) |

**字体层级**:
```css
/* 标题层级 */
H1: Lora, 48px, Bold, letter-spacing: -0.5px
H2: Lora, 36px, Bold
H3: Lora, 28px, SemiBold

/* 正文层级 */
Body Large: Inter, 18px, Regular, line-height: 1.8
Body: Inter, 16px, Regular, line-height: 1.8
Body Small: Inter, 14px, Regular, line-height: 1.6

/* 辅助文字 */
Caption: Inter, 12px, Medium, letter-spacing: 0.5px, uppercase
```

#### 4.1.3 Logo设计

**核心元素**:
- 一个圆（代表灵魂/完整/宇宙）
- 圆中包含北印度命盘的菱形轮廓（12宫位简化版）
- 中心点缀一颗五角星（代表指引）
- 使用天体金线条绘制（2px线宽）
- Logo右侧文字："AstroSoul"（Lora字体）

**尺寸规范**:
- 标准尺寸：64x64px（图标） + 文字
- 小尺寸：32x32px（Favicon）
- 大尺寸：256x256px（社交媒体头像）

---

### 4.2 关键页面设计规范

#### 页面 1: 登录/引导页 (Landing Page)

**目标**: 在5秒内抓住用户，让他们感到"来对地方了"，并立即想要探索。

**布局结构**:

```
┌─────────────────────────────────────────────────────────────────┐
│                          [Logo]                                 │
│                                                                 │
│           [微妙的星云背景动画 - WebGL/CSS动画]                    │
│                                                                 │
│                 映射你的灵魂，发现你的命运                        │
│              Map Your Soul, Discover Your Destiny               │
│                                                                 │
│         结合古老印度占星智慧与现代AI，为你揭示内在的宇宙            │
│                                                                 │
│                   [开启我的星盘] (大号紫晶色按钮)                  │
│                                                                 │
│                         [向下滚动箭头]                           │
└─────────────────────────────────────────────────────────────────┘
```

**向下滚动后的模块**:

1. **"它是如何运作的"模块** (3步流程图)
```
   [图标: 出生信息]     [图标: 星盘]      [图标: AI脑袋]
   输入出生信息    →   生成宇宙蓝图    →   解锁深度洞察
```

2. **"配偶画像"卖点模块** (左右分栏)
```
┌──────────────────────────────────────────────────────────┐
│ 左侧：                   右侧：                            │
│ 你的灵魂伴侣           [模糊的报告预览图]                   │
│ 是什么样？             "TA可能有着双子座的机敏..."          │
│                       [解锁完整画像 - $9.99]              │
│ AI基于你的第7宫和                                         │
│ Navamsa盘，为你绘制                                       │
│ 详尽的配偶画像                                            │
└──────────────────────────────────────────────────────────┘
```

3. **"信任与专业"模块**
```
✓ 基于瑞士星历表精准计算
✓ 由OpenAI GPT-4驱动的深度解读
✓ 已为10,000+用户揭示灵魂地图

[用户好评卡片1] [用户好评卡片2] [用户好评卡片3]
```

---

#### 页面 2: 出生信息输入页 (Birth Data Input)

**目标**: 让输入过程感觉像是一个神圣的仪式，而非枯燥的填表。

**布局结构**:
```
┌─────────────────────────────────────────────────────────────┐
│               [微妙的星云背景，比首页更深邃]                   │
│                                                             │
│                    开启你的星图之旅                          │
│                 请告诉我们你的宇宙坐标                        │
│                                                             │
│      [进度条: ●●●○○ Step 1/3]                              │
│                                                             │
│   ┌─────────────────────────────────────────┐              │
│   │ 👤 你的昵称                              │              │
│   │ [___________________________]            │              │
│   │                                         │              │
│   │ 📅 出生日期                              │              │
│   │ [日期选择器__________________]           │              │
│   │                                         │              │
│   │ ⏰ 出生时间 (精确到分钟很重要哦)            │              │
│   │ [时间选择器__________________]           │              │
│   │                                         │              │
│   │ 🌍 出生城市                              │              │
│   │ [自动补全输入框_______________]          │              │
│   │   💡 输入城市名，我们会自动获取经纬度      │              │
│   │                                         │              │
│   │        [揭示我的命盘] (紫晶色大按钮)       │              │
│   │                                         │              │
│   │  🔒 你的数据绝对安全，仅用于命盘计算        │              │
│   └─────────────────────────────────────────┘              │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**交互细节**:
- 输入框默认状态：月岩灰边框
- 聚焦状态：天体金边框 + 微光效果
- 城市自动补全：下拉列表使用玻璃拟态效果
- 表单验证：实时提示，友好的错误信息

---

#### 页面 3: 个人命盘仪表盘 (Dashboard)

**目标**: 震撼、清晰、引人入胜。这是产品的核心。

**布局结构** (三栏式):

```
┌──────────────────────────────────────────────────────────────────────────┐
│  [Logo]                  AstroSoul                        [用户头像 ▼]    │
├─────────────┬────────────────────────────────────────┬────────────────────┤
│  左栏 (25%) │        中栏 (50%) - 视觉核心            │    右栏 (25%)      │
│             │                                        │                    │
│ 欢迎回来，   │  [分盘切换下拉菜单: D1 ▼]              │  🌟 你的第7宫      │
│ Xuan ✨     │                                        │  隐藏着什么秘密？   │
│             │         [北印度菱形命盘图]              │                    │
│ ┌─────────┐ │                                        │  AI为你绘制       │
│ │ ♈ 上升   │ │          [巨大的SVG命盘图]             │  灵魂伴侣画像      │
│ │ 白羊座   │ │                                        │                    │
│ │ 你的人生 │ │     [交互：悬停宫位/行星高亮]           │  [模糊的报告预览]  │
│ │ 面具     │ │                                        │                    │
│ └─────────┘ │                                        │  "TA可能有着..."   │
│             │                                        │                    │
│ ┌─────────┐ │                                        │  [解锁完整报告]    │
│ │ ☉ 太阳   │ │                                        │  $9.99            │
│ │ 金牛座   │ │      [图例：行星符号对照表]             │                    │
│ │ 你的灵魂 │ │                                        │  💳 安全支付      │
│ │ 核心     │ │                                        │  🔒 永久解锁      │
│ └─────────┘ │                                        │                    │
│             │                                        │                    │
│ ┌─────────┐ │                                        │                    │
│ │ ☽ 月亮   │ │                                        │                    │
│ │ 巨蟹座   │ │                                        │                    │
│ │ 你的内在 │ │                                        │                    │
│ │ 情绪     │ │                                        │                    │
│ └─────────┘ │                                        │                    │
│             │                                        │                    │
│ ──────────  │                                        │                    │
│             │                                        │                    │
│ 🎁 免费AI   │                                        │                    │
│ 解读：      │                                        │                    │
│             │                                        │                    │
│ "你的白羊上 │                                        │                    │
│ 升赋予了你 │                                        │                    │
│ 无畏的勇气 │                                        │                    │
│ ..."        │                                        │                    │
│             │                                        │                    │
│ [了解更多→] │                                        │                    │
│             │                                        │                    │
└─────────────┴────────────────────────────────────────┴────────────────────┘
```

**命盘图交互规范**:

1. **默认状态**:
   - 宫位线条：月岩灰 (#A0AEC0)
   - 行星符号：星云白 (#F7FAFC)
   - 背景：透明或极深的靛蓝

2. **悬停宫位**:
   - 宫位边框变为天体金 (#E3B37C)
   - 边框加粗到2px并发光
   - 在宫位旁弹出信息卡片：
     ```
     ┌──────────────────────┐
     │ 第7宫 - 伴侣与婚姻    │
     │ 星座：天秤座          │
     │ 宫主星：金星 (位于9宫) │
     └──────────────────────┘
     ```

3. **悬停行星**:
   - 行星符号放大到22px
   - 行星符号发出天体金光晕
   - 用发光线条连接到它守护的宫位
   - 弹出详细信息：
     ```
     ┌──────────────────────────┐
     │ ♀ 金星 (Venus)           │
     │ 位置：9宫，射手座 15°23'  │
     │ Nakshatra: Purva Ashadha │
     │ 守护：2宫和7宫            │
     └──────────────────────────┘
     ```

4. **点击行星**:
   - 锁定高亮状态
   - 显示更详细的解读面板

---

#### 页面 4: AI报告展示页 (Report Page)

**目标**: 让用户感到"这$9.99花得太值了"。

**布局结构**:
```
┌──────────────────────────────────────────────────────────────────┐
│                      [返回仪表盘] [下载PDF] [分享]                  │
│                                                                  │
│                    [微妙的星空背景图案]                            │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │                                                            │ │
│  │              🌟 你的灵魂伴侣画像报告 🌟                     │ │
│  │                                                            │ │
│  │          基于你的第7宫与Navamsa盘精心解读                   │ │
│  │                                                            │ │
│  │  ──────────────────────────────────────────────────────   │ │
│  │                                                            │ │
│  │  【引言】                                                   │ │
│  │                                                            │ │
│  │  亲爱的Xuan，当我凝视你的第7宫，我看到了...                 │ │
│  │  [流式输出的优雅文字]                                       │ │
│  │                                                            │ │
│  │  ──────────────────────────────────────────────────────   │ │
│  │                                                            │ │
│  │  【第一部分：TA的性格与灵魂】                                │ │
│  │                                                            │ │
│  │  [详细的AI解读内容]                                         │ │
│  │                                                            │ │
│  │  ...                                                       │ │
│  │                                                            │ │
│  └────────────────────────────────────────────────────────────┘ │
│                                                                  │
│                 [解锁更多报告：事业天命 / 财富潜力]                 │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

**排版规范**:
- 最大内容宽度：720px（居中对齐）
- 标题：Lora 36px Bold，天体金色
- 章节标题：Lora 24px SemiBold
- 正文：Inter 18px Regular，行高1.8，星云白色
- 段落间距：32px
- 章节间距：64px

**流式输出体验**:
- 文字以每次5-10个字的速度出现
- 打字机光标效果：`|` 闪烁
- 背景音乐（可选）：轻柔的环境音乐
- 完成后显示✨动画效果

---

### 4.3 魔法般的微交互 (Micro-interactions)

| 交互场景 | 效果描述 | 技术实现 |
|----------|----------|----------|
| **按钮悬停** | 按钮轻微放大(scale: 1.05) + 发光效果 + 光标变为pointer | CSS transform + box-shadow |
| **加载状态** | 骨架屏 + 星光扫过动画 | 渐变背景 + animation |
| **页面切换** | 淡入淡出 + 轻微上移效果 | Framer Motion / React Spring |
| **表单验证** | 实时提示 + 震动效果（错误时） | CSS shake animation |
| **支付成功** | 五彩纸屑爆炸动画 + 成功音效 | canvas-confetti 库 |
| **报告生成** | 星辰轨迹动画 + 进度百分比 | SVG动画 + 实时进度更新 |
| **分享卡片生成** | 卡片从屏幕中心飞出效果 | CSS transform + transition |
| **通知Toast** | 从顶部平滑滑入 + 玻璃拟态效果 | React-Hot-Toast |

---

### 4.4 响应式设计规范

**断点 (Breakpoints)**:
```css
/* 移动端 */
@media (max-width: 640px) { ... }

/* 平板 */
@media (min-width: 641px) and (max-width: 1024px) { ... }

/* 桌面端 */
@media (min-width: 1025px) { ... }
```

**移动端适配关键点**:
- 仪表盘改为单栏布局
- 命盘图缩小但保持可读性
- 字体大小适当减小（最小14px）
- 按钮增大触摸区域（最小44x44px）
- 表单输入框占满屏幕宽度

---

## 5. 技术规格

### 5.1 技术栈选择

| 层级 | 技术 | 理由 |
|------|------|------|
| **开发工具** | Cursor AI Editor | AI辅助开发，提高效率 |
| **前端框架** | Next.js 14 (App Router) | React生态、SSR/SSG支持、优秀的性能 |
| **语言** | TypeScript | 类型安全，减少bug |
| **样式** | Tailwind CSS | 快速开发、一致性强、易于定制 |
| **动画** | Framer Motion | 流畅的动画效果 |
| **状态管理** | Zustand | 轻量级、简单易用 |
| **表单处理** | React Hook Form | 性能优秀、易于验证 |
| **图表绘制** | SVG + D3.js | 灵活、可交互的命盘图 |
| **后端** | Next.js API Routes | 简化架构，前后端一体 |
| **数据库** | Supabase (PostgreSQL) | 快速搭建、实时功能、认证支持 |
| **支付** | Stripe | 行业标准、支持多种支付方式 |
| **AI模型** | OpenAI GPT-4 | 最强语言理解和生成能力 |
| **占星计算** | AstroAPI / VedicRishi API | 成熟的第三方服务 |
| **地理服务** | Google Places API | 精准的城市经纬度数据 |
| **部署** | Vercel | Next.js的原生平台，零配置部署 |
| **监控** | Vercel Analytics + Sentry | 性能监控 + 错误追踪 |

---

### 5.2 系统架构

```
┌──────────────────────────────────────────────────────────────────┐
│                         用户浏览器                                 │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │              Next.js 前端 (React + TypeScript)              │ │
│  │                                                            │ │
│  │  • 出生信息输入表单                                         │ │
│  │  • SVG命盘图渲染                                            │ │
│  │  • AI报告展示                                               │ │
│  │  • Stripe支付集成                                           │ │
│  └────────────────────────────────────────────────────────────┘ │
│                            ↓ ↑                                   │
└────────────────────────────│─│────────────────────────────────────┘
                             │ │
                    HTTPS    │ │    JSON
                             │ │
┌────────────────────────────│─│────────────────────────────────────┐
│                  Vercel (Next.js 后端)                            │
│                            ↓ ↑                                   │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │                  Next.js API Routes                         │ │
│  │                                                             │ │
│  │  • /api/generate-chart  (调用占星API)                       │ │
│  │  • /api/interpret-basic  (调用GPT-4，免费解读)               │ │
│  │  • /api/interpret-spouse (调用GPT-4，付费报告)               │ │
│  │  • /api/create-payment   (Stripe支付)                       │ │
│  │  • /api/geocode          (Google Places API)                │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                            ↓ ↑                                   │
└────────────────────────────│─│────────────────────────────────────┘
                             │ │
              ┌──────────────┴─┴────────────┐
              │                              │
              ↓                              ↓
  ┌───────────────────────┐    ┌───────────────────────┐
  │   外部API服务          │    │   数据存储             │
  │                       │    │                       │
  │  • AstroAPI           │    │  • Supabase (用户数据) │
  │  • OpenAI GPT-4       │    │  • Vercel Blob (PDF)  │
  │  • Stripe             │    │                       │
  │  • Google Places      │    │                       │
  └───────────────────────┘    └───────────────────────┘
```

---

### 5.3 数据库设计 (Supabase)

#### 表 1: users (用户表)

| 字段名 | 类型 | 说明 | 约束 |
|--------|------|------|------|
| id | uuid | 用户ID | PRIMARY KEY |
| email | varchar | 邮箱（可选） | UNIQUE |
| created_at | timestamp | 创建时间 | NOT NULL |

#### 表 2: birth_charts (命盘表)

| 字段名 | 类型 | 说明 | 约束 |
|--------|------|------|------|
| id | uuid | 命盘ID | PRIMARY KEY |
| user_id | uuid | 用户ID | FOREIGN KEY → users.id |
| name | varchar | 昵称 | NOT NULL |
| birth_date | date | 出生日期 | NOT NULL |
| birth_time | time | 出生时间 | NOT NULL |
| birth_place_city | varchar | 出生城市 | NOT NULL |
| birth_place_lat | decimal | 纬度 | NOT NULL |
| birth_place_lon | decimal | 经度 | NOT NULL |
| birth_place_tz | varchar | 时区 | NOT NULL |
| chart_data_json | jsonb | 完整命盘数据（D1-D12） | NOT NULL |
| created_at | timestamp | 创建时间 | NOT NULL |

#### 表 3: reports (报告表)

| 字段名 | 类型 | 说明 | 约束 |
|--------|------|------|------|
| id | uuid | 报告ID | PRIMARY KEY |
| chart_id | uuid | 命盘ID | FOREIGN KEY → birth_charts.id |
| report_type | varchar | 报告类型（spouse/career/wealth） | NOT NULL |
| content | text | AI生成的报告内容 | NOT NULL |
| is_paid | boolean | 是否已付费 | DEFAULT FALSE |
| payment_id | varchar | Stripe支付ID | - |
| created_at | timestamp | 创建时间 | NOT NULL |

#### 表 4: waitlist (等候列表)

| 字段名 | 类型 | 说明 | 约束 |
|--------|------|------|------|
| id | uuid | ID | PRIMARY KEY |
| email | varchar | 邮箱 | NOT NULL |
| interested_report | varchar | 感兴趣的报告（D2/D4/D7/D12） | NOT NULL |
| created_at | timestamp | 创建时间 | NOT NULL |

---

### 5.4 核心API端点设计

#### API 1: 生成命盘

```typescript
POST /api/generate-chart

// 请求体
{
  "name": "Xuan",
  "birthDate": "1990-05-15",
  "birthTime": "14:30",
  "birthPlace": {
    "city": "Mumbai, India",
    "latitude": 19.0760,
    "longitude": 72.8777,
    "timezone": "Asia/Kolkata"
  }
}

// 响应
{
  "chartId": "uuid-123",
  "chartData": {
    "D1": { /* 命盘数据 */ },
    "D9": { /* Navamsa数据 */ },
    "D10": { /* Dasamsa数据 */ },
    // ... 其他分盘
  },
  "basicInfo": {
    "ascendant": "Aries",
    "sun": "Taurus",
    "moon": "Cancer"
  }
}
```

#### API 2: 免费基础解读

```typescript
POST /api/interpret-basic

// 请求体
{
  "chartId": "uuid-123"
}

// 响应
{
  "interpretation": "你的白羊上升赋予了你无畏的勇气和开拓精神..."
}
```

#### API 3: 生成配偶画像报告（付费）

```typescript
POST /api/interpret-spouse

// 请求体
{
  "chartId": "uuid-123",
  "paymentIntentId": "pi_xxx" // Stripe支付ID
}

// 响应（SSE流式输出）
data: {"type": "start", "message": "开始生成报告..."}
data: {"type": "content", "text": "亲爱的Xuan，当我凝视你的第7宫..."}
data: {"type": "content", "text": "我看到了金星位于射手座..."}
...
data: {"type": "complete", "reportId": "uuid-456"}
```

#### API 4: 创建支付

```typescript
POST /api/create-payment

// 请求体
{
  "chartId": "uuid-123",
  "reportType": "spouse",
  "amount": 999 // 单位：美分
}

// 响应
{
  "clientSecret": "pi_xxx_secret_yyy",
  "paymentIntentId": "pi_xxx"
}
```

---

### 5.5 性能与优化

| 优化项 | 策略 | 目标指标 |
|--------|------|----------|
| **首屏加载** | SSR + 代码分割 + 图片优化 | LCP < 2.5s |
| **命盘图渲染** | SVG懒加载 + 虚拟滚动 | FID < 100ms |
| **AI报告生成** | 流式输出 + 后台缓存 | TTFB < 600ms |
| **API调用** | 请求去重 + 缓存策略 | - |
| **数据库查询** | 索引优化 + 连接池 | 查询 < 100ms |

---

### 5.6 安全与隐私

| 安全措施 | 实现方式 |
|----------|----------|
| **数据加密** | HTTPS + 数据库字段加密 |
| **API鉴权** | JWT Token + API密钥 |
| **支付安全** | Stripe PCI合规 + 不存储卡号 |
| **XSS防护** | Content Security Policy |
| **CSRF防护** | CSRF Token |
| **速率限制** | API请求限制（100次/小时） |
| **隐私合规** | GDPR + CCPA合规，用户可删除数据 |

---

## 6. 产品路线图

### V1.0: 核心上线 (当前版本) - 2025 Q4

**目标**: 验证核心商业模式，获取第一批种子用户（目标100付费用户）

**功能清单**:
- ✅ 精准命盘生成（D1, D9, D10可查看）
- ✅ 免费基础解读（上升/太阳/月亮）
- ✅ 《AI配偶画像》付费报告（$9.99）
- ✅ Stripe支付集成
- ✅ 精美的北印度菱形命盘图（交互式）
- ✅ 战略性分盘锁定（D2/D4/D7/D12预热）
- ✅ 报告分享功能

**营销策略**:
- 社交媒体广告（Instagram、Twitter、Reddit占星社区）
- 免费内容营销（博客文章："如何读懂你的Navamsa盘"）
- 联盟营销（与占星博主合作）

---

### V1.1: 事业天命 - 2026 Q1

**新增功能**:
- 🆕 《事业天命报告》（基于D1 + D10盘）
- 🆕 分析用户的职业方向、成功领域、最佳职业转型时机
- 🆕 定价：$9.99

**解锁分盘**:
- D10 (Dasamsa) 深度解读

**营销策略**:
- 向V1.0订阅通知的用户推送新功能邮件
- 推出"新年事业规划"主题活动
- 提供"配偶画像 + 事业天命"套餐（$17.99，省$2）

**目标**: 300付费用户，复购率30%

---

### V1.2: 财富与家庭 - 2026 Q2

**新增功能**:
- 🆕 《财富潜力分析》（基于D2 Hora盘）
- 🆕 《原生家庭影响力》（基于D12 Dwadasamsa盘）
- 🆕 定价：各$9.99

**解锁分盘**:
- D2 (Hora) 财富盘
- D12 (Dwadasamsa) 父母盘

**营销策略**:
- 推出"三合一深度洞察套餐"（配偶+事业+财富）$24.99
- 举办"财富占星"线上讲座
- 联合财经自媒体推广

**目标**: 600付费用户，套餐购买率20%

---

### V1.3: 亲子与家宅 - 2026 Q3

**新增功能**:
- 🆕 《亲子缘分报告》（基于D7 Saptamsa盘）
- 🆕 《家宅运势报告》（基于D4 Chaturthamsa盘）
- 🆕 定价：各$9.99

**解锁分盘**:
- D7 (Saptamsa) 子女盘
- D4 (Chaturthamsa) 家宅盘

**营销策略**:
- 推出"完整人生地图"套餐（所有5份报告）$39.99（原价$49.95）
- 母亲节/父亲节主题营销

**目标**: 1000付费用户，完整套餐购买率15%

---

### V1.4: 运势预测 - 2026 Q4

**新增功能**:
- 🆕 《年度运势预测》（基于Dasha + Transit）
- 🆕 《月度运势报告》（订阅制，$4.99/月）
- 🆕 重大事件提醒（如"你的木星回归即将到来"）

**商业模式升级**:
- 引入订阅制（$49.99/年，包含所有静态报告 + 月度运势）

**目标**: 2000付费用户，订阅转化率25%

---

### V2.0: 社交与合盘 - 2027 Q1

**重大功能**:
- 🆕 **关系合盘 (Synastry)**: 上传两人命盘，分析关系契合度
- 🆕 《关系契合度报告》（$14.99）
- 🆕 社区功能：用户可分享报告摘要，评论交流
- 🆕 "寻找你的灵魂伴侣"功能（基于占星匹配的轻社交）

**目标**: 5000付费用户，社交功能DAU 1000

---

## 7. 商业模式

### 7.1 收入模式

| 收入来源 | 定价 | 预期占比 |
|----------|------|----------|
| **单次报告购买** | $9.99/份 | 60% (V1.0主要来源) |
| **报告套餐** | $24.99 (3份), $39.99 (5份) | 25% (V1.2+) |
| **年度订阅** | $49.99/年 | 10% (V1.4+) |
| **月度订阅** | $4.99/月 | 5% (V1.4+) |

### 7.2 成本结构

| 成本项 | 估算 | 说明 |
|--------|------|------|
| **占星API** | $0.05/次计算 | AstroAPI按次收费 |
| **OpenAI API** | $0.06/1K tokens (GPT-4) | 单份报告约2K tokens输入 + 2K tokens输出 = $0.24 |
| **Stripe手续费** | 2.9% + $0.30 | 单笔$9.99交易费用约$0.59 |
| **Vercel托管** | $20/月 | Pro计划 |
| **Supabase数据库** | $25/月 | Pro计划 |
| **Google Places API** | $0.017/次 | 前2000次免费 |
| **总成本/单份报告** | ~$0.90 | - |

**单份报告利润**: $9.99 - $0.90 = **$9.09**  
**目标利润率**: ~91%

### 7.3 增长预测

| 时间 | 累计用户 | 付费用户 | 月收入 | 累计收入 |
|------|----------|----------|--------|----------|
| V1.0 (2025 Q4) | 1,000 | 100 | $999 | $999 |
| V1.1 (2026 Q1) | 3,000 | 300 | $2,997 | $3,996 |
| V1.2 (2026 Q2) | 6,000 | 600 | $5,994 | $9,990 |
| V1.3 (2026 Q3) | 10,000 | 1,000 | $9,990 | $19,980 |
| V1.4 (2026 Q4) | 20,000 | 2,000 | $24,975 | $44,955 |
| V2.0 (2027 Q1) | 50,000 | 5,000 | $62,438 | $107,393 |

---

## 8. 成功指标 (KPIs)

### 8.1 产品指标

| 指标 | 目标值 (V1.0) | 衡量方式 |
|------|---------------|----------|
| **首屏加载时间** | < 2.5s | Vercel Analytics |
| **命盘生成成功率** | > 99% | 后端日志 |
| **AI报告生成时间** | < 30s | API监控 |
| **移动端适配率** | 100% | 跨设备测试 |

### 8.2 用户指标

| 指标 | 目标值 (V1.0) | 衡量方式 |
|------|---------------|----------|
| **注册到生成命盘转化率** | > 80% | Funnel分析 |
| **免费用户留存率（7天）** | > 40% | Cohort分析 |
| **付费转化率** | > 10% | 支付数据 |
| **报告分享率** | > 30% | 分享按钮点击 |
| **NPS (Net Promoter Score)** | > 50 | 用户调研 |

### 8.3 商业指标

| 指标 | 目标值 (V1.0) | 衡量方式 |
|------|---------------|----------|
| **月度收入** | $999 (100笔) | Stripe数据 |
| **客户获取成本 (CAC)** | < $10 | 广告支出/新用户 |
| **客户终身价值 (LTV)** | > $30 | 平均每用户购买额 |
| **LTV/CAC比率** | > 3 | LTV ÷ CAC |

---

## 9. 风险与应对

### 9.1 技术风险

| 风险 | 影响 | 应对措施 |
|------|------|----------|
| **占星API不稳定** | 命盘生成失败 | 选择多个备用API，实现自动切换 |
| **OpenAI API费用超预算** | 成本失控 | 设置每日调用上限，优化Prompt长度 |
| **SVG命盘图性能问题** | 页面卡顿 | 使用Canvas替代，或WebGL加速 |
| **支付系统故障** | 收入损失 | Stripe有99.99%可用性，添加异常告警 |

### 9.2 市场风险

| 风险 | 影响 | 应对措施 |
|------|------|----------|
| **竞品出现** | 用户流失 | 持续优化AI解读质量，建立品牌护城河 |
| **用户付费意愿低** | 收入不达标 | 提供更多免费价值，降低首次付费门槛（如$4.99尝鲜价） |
| **占星热度下降** | 市场萎缩 | 拓展到MBTI、九型人格等其他自我认知领域 |

### 9.3 合规风险

| 风险 | 影响 | 应对措施 |
|------|------|----------|
| **隐私法规变化** | 罚款风险 | 严格遵守GDPR/CCPA，定期审计 |
| **AI生成内容争议** | 用户投诉 | 在报告中明确标注"AI辅助生成，仅供参考" |
| **占星师资质问题** | 法律纠纷 | 声明"本产品为娱乐和自我探索工具，不构成专业咨询" |

---

## 附录 A: 术语表

| 术语 | 英文 | 解释 |
|------|------|------|
| **命盘** | Rasi Chart / D1 | 印度占星的基础图表，显示行星在12宫位的分布 |
| **分盘** | Divisional Charts (Vargas) | 命盘的细分图表，如D9(婚姻)、D10(事业)等 |
| **Navamsa** | D9 | 第9分盘，主要看婚姻、配偶和命运转折 |
| **上升星座** | Lagna / Ascendant | 出生时东方地平线上的星座，代表人生面具 |
| **宫主星** | Lord of House | 某个宫位所在星座的守护星 |
| **Nakshatra** | - | 印度占星的27个星宿 |
| **Dasha** | - | 大运系统，预测人生不同阶段的主题 |
| **Transit** | - | 流年，当前天上行星对命盘的影响 |

---

## 附录 B: 设计资源清单

| 资源类型 | 名称 | 用途 |
|----------|------|------|
| **配色工具** | Coolors.co | 生成品牌色盘 |
| **字体** | Google Fonts (Lora + Inter) | 免费商用字体 |
| **图标库** | Feather Icons | 统一风格的UI图标 |
| **动画库** | Framer Motion | React动画 |
| **SVG编辑** | Figma | 命盘图设计 |
| **插画** | unDraw | 免费插画资源 |
| **星空背景** | Starfield by Three.js | WebGL星空动画 |

---

## 附录 C: 开发检查清单

### Phase 1: 基础框架搭建
- [ ] Next.js 14项目初始化
- [ ] Tailwind CSS配置 + 自定义色盘
- [ ] TypeScript严格模式配置
- [ ] ESLint + Prettier配置
- [ ] Git仓库初始化 + .gitignore

### Phase 2: 前端页面开发
- [ ] 登录/引导页
- [ ] 出生信息输入表单
- [ ] Google Places API集成
- [ ] 命盘仪表盘布局
- [ ] SVG命盘图组件（D1/D9/D10）
- [ ] 分盘切换下拉菜单
- [ ] 基础信息卡片组件
- [ ] 响应式设计适配

### Phase 3: 后端API开发
- [ ] Supabase项目创建 + 数据库表
- [ ] `/api/generate-chart` - 调用占星API
- [ ] `/api/interpret-basic` - 调用GPT-4免费解读
- [ ] `/api/create-payment` - Stripe支付
- [ ] `/api/interpret-spouse` - 付费报告生成（SSE）
- [ ] 错误处理 + 日志记录

### Phase 4: AI Prompt工程
- [ ] 免费基础解读Prompt优化
- [ ] 配偶画像报告Prompt设计
- [ ] 测试不同星盘的输出质量
- [ ] 调整temperature和max_tokens

### Phase 5: 支付集成
- [ ] Stripe账户设置
- [ ] Stripe Checkout集成
- [ ] 支付成功/失败处理
- [ ] Webhook配置（支付确认）

### Phase 6: 交互与动画
- [ ] 命盘图悬停交互
- [ ] 加载动画（骨架屏 + 星光扫过）
- [ ] AI报告流式输出
- [ ] 按钮微交互
- [ ] 页面切换动画

### Phase 7: 分享功能
- [ ] 报告分享卡片生成（Canvas API）
- [ ] 社交媒体分享按钮
- [ ] 复制链接功能

### Phase 8: 测试与优化
- [ ] 单元测试（关键函数）
- [ ] 端到端测试（Playwright）
- [ ] 性能测试（Lighthouse）
- [ ] 跨浏览器测试
- [ ] 移动端真机测试

### Phase 9: 部署与监控
- [ ] Vercel项目部署
- [ ] 环境变量配置
- [ ] 自定义域名绑定
- [ ] Vercel Analytics集成
- [ ] Sentry错误监控

### Phase 10: 营销准备
- [ ] 编写产品博客文章
- [ ] 社交媒体账号设置
- [ ] 准备演示视频
- [ ] 设计宣传图片
- [ ] Beta测试邀请名单

---

## 结语

这份PRD是AstroSoul从0到1的完整蓝图。它不仅定义了"要做什么"，更重要的是解释了"为什么这么做"以及"如何优雅地做"。

**核心理念**:
1. **用户体验至上**: 每一个像素都为创造"神圣的探索体验"服务
2. **战略性功能规划**: 免费内容吸引用户，付费内容提供超预期价值，锁定功能制造期待
3. **技术与艺术的结合**: 精准的占星计算 + 温暖的AI解读 + 美到极致的界面

**下一步行动**:
1. 将此PRD分享给开发团队（即使团队只有你和Cursor）
2. 在Cursor中创建项目，逐步完成开发检查清单
3. 每完成一个Phase，回到此文档标记进度
4. 在遇到决策困难时，回到"产品愿景"章节，问自己："这个选择能让AstroSoul成为更好的灵魂探索工具吗？"

**愿AstroSoul成为连接古老智慧与现代科技的桥梁，照亮每一个寻求自我的灵魂。✨**

---

**文档维护记录**:
- 2025-10-12: V1.1 完整版发布（Xuan）
- 下次更新计划: V1.0功能实现后，根据用户反馈迭代

---

*"The stars incline, but do not compel."*  
*星辰倾向，但不强制。*

— 印度占星古谚

